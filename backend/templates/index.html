<!doctype html>

<html lang="en">
    <head>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <link href="https://cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
        <link rel="stylesheet" href='static/styles.css'>
        <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script>
          window.onbeforeunload = function() {
             return "Do you want to leave? Changes will not be saved";
          };
        </script>
    </head>

    <body>
        <div class='header'>
          <h1 class='title'>LitSearch</h1>
          <h2 class='description'>Search literature for analytical evidence with machine learning</h2>
        </div>
        <div class="main-content">
            <div id="editor">
                <p>Add the text to search through here</p>
            </div>

            <div class="sidebar">
                <div id='filtered-list'>

                </div>

                <div class='card'>
                  <div class='card-body'>
                    <h5 class="card-title">Family</h5>
                    <p class="card-text" style='background: #f0ffff;'> Tellus mauris a diam maecenas sed. Habitant morbi tristique senectus et netus et malesuada fames ac. <p>
                    <p class="card-text" style='background: #e6e6fa;'> Tellus mauris a diam maecenas sed. Habitant morbi tristique senectus et netus et malesuada fames ac. <p>
                  </div>
                </div>
            </div>
        </div>

        <script src='https://cdn.quilljs.com/1.3.6/quill.js'></script>
        <script>
          ///quill stuff
            var Delta = Quill.import('delta');
            var quill = new Quill('#editor', {
                theme: 'bubble'

            });

            var change = new Delta();
            quill.on('text-change', function(delta) {
                change = change.compose(delta);
            });
            setInterval(function() {
              if (change.length() > 0) {
                console.log('Sent for ml', quill.getText());
                $.post('/api/', {'text' : quill.getText()});
                ///$.getJSON('/api/', function(data){
                   /// console.log(data)
                ///})
              }
            }, 1000);

          ///list stuff
          function myFunction() {
            // Declare variables
            var input, filter, ul, li, a, i, txtValue;
            input = document.getElementById('searchbox');
            filter = input.value.toUpperCase();
            ul = document.getElementById("listobjects");
            li = ul.getElementsByTagName('li');

            // Loop through all list items, and hide those who don't match the search query
            for (i = 0; i < li.length; i++) {
              a = li[i].getElementsByTagName("a")[0];
              txtValue = a.textContent || a.innerText;
              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
              } else {
                li[i].style.display = "none";
              }
            }
          }
        </script>
        <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>

        <!-- Load our React component. -->
        <script src="app.js"></script>
    </body>
</html>
